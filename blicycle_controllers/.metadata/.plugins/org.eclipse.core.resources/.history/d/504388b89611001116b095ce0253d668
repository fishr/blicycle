package controller;

import java.awt.Color;
import java.awt.Graphics2D;
import java.awt.image.BufferedImage;

import datasource.MotorCommandTranslator;

public class StraightProportionalController implements Controller {

	// Fields
	double lastCorrection = 0.0f;
	
	@Override
	public double[] getLogLine() {
		return new double[] {lastCorrection};
	}

	@Override
	public int stepController(double steeringTheta) {
		double correction =  4.0 * steeringTheta;
		lastCorrection = correction;
		return MotorCommandTranslator.makeSingleMotorCenterpoint((int) Math.round(correction));
	}

	@Override
	public void visualize(Graphics2D g, int x, int y, int width, int height) {
		BufferedImage buffer = new BufferedImage(width, height, BufferedImage.TYPE_INT_RGB);
		Graphics2D g2D = (Graphics2D) buffer.getGraphics();
		g2D.setBackground(Color.WHITE);
		
		
		g2D.drawString("Last correction: " + lastCorrection, x, y);
		
	}

}
